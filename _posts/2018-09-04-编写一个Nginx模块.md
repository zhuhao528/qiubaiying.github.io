---
layout:     post
title:      编写一个Nginx HTTP模块
subtitle:	  Ubuntu Nginx HTTP模块
date:       2018-09-04
author:     Neil
header-img: img/post-bg-ios9-web.jpg
catalog: 	 true
tags:
    - Ubuntu
    - Nginx
    - module
---

# 环境
Mac上使用VirtualBox安装的Ubuntu系统版本
![系统版本](https://ws4.sinaimg.cn/large/006tNbRwly1fukxqqr3z0j31kw04twfk.jpg)

# 原理



# 调试
安装Nginx可参考上篇博文 

####1.进入root  

```
sudo su
```  

####2.编译安装mytest模块
模块（helloworld文件）可以放到你任意想放的路径目录下，这里我放在了和nginx源码平级的目录下 也即都是根目录下  
模块下有两个文件（在helloworld文件夹下）  
config ngx_http_mytest_module.c  
shell注释  
./configure --prefix=/你的安装目录 --add-module=/第三方模块目录

```
./configure —prefix=/usr/local/nginx —add-module=/home/zhuhao/helloworld && make && make install
```

####3.修改conf文件  

```
cd /usr/local/nginx/conf/  
vim nginx.conf
```  
添加如下配置，注意这里是安装完成后目录的配置文件而不是源码目录下的配置文件 
 
```
location /test {  
	mytest;
}
```

#####4.运行Nginx并查看结果  

```
/usr/local/nginx/sbin/nginx
```  
注意  

```
/usr/local/nginx/sbin/nginx -s stop // 停止运行
```


#运行结果
![结果](https://ws2.sinaimg.cn/large/0069RVTdly1fuxmb7j5d0j31kw087q3u.jpg)


# 源码下载
[github源码下载地址](https://github.com/zhuhao528/NginxSource)  

# 参考： 
《深入理解Nginx模块开发与架构解析第二版》-- 淘辉  
[实战开发一个Nginx扩展 (Nginx Module)](https://juejin.im/entry/5942669c8d6d810058c684f9)  
[如何写nginx module](https://timyang.net/web/nginx-module/)  
[Nginx编译安装第三方模http_substitutions_filter_module](http://rmingwang.com/install-nginx-third-modules-http_sub_module.html)


 









 

